---
import "../../styles/global.css";
import "@fontsource/poppins";
import "@fontsource/poppins/400-italic.css";
import "@fontsource/poppins/500.css";
import "@fontsource/poppins/500-italic.css";
import "@fontsource/poppins/600.css";
import "@fontsource/poppins/600-italic.css";
import "@fontsource/poppins/700.css";
import "@fontsource/poppins/800.css";
import SEO from "../SEO.astro";
import Footer from "../Footer.astro";
import Navbar from "../Navbar.astro";

export interface Props {
  title?: string;
  description?: string;
  siteName?: string;
  canonical?: string;
  ogImage?: string;
  ogType?: string;
  twitterHandle?: string;
  slug?: string;
}

const {
  title,
  description,
  siteName = "casto-graziano.me",
  canonical,
  ogImage,
  ogType,
  twitterHandle,
  slug,
} = Astro.props as Props;
---

<html lang="en" class="">
  <head>
    <script
      is:inline
      src="https://cdn.jsdelivr.net/npm/theme-change@2.2.0/index.js"
    ></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("/sw.js");
        });
      }
    </script>
    <SEO
      {...{ title, description, siteName, canonical, ogImage, ogType, twitterHandle, slug }}
    />
  </head>

  <body
    style="visibility: hidden;"
    class="flex flex-col items-center min-h-screen antialiased overflow-x-hidden overflow-y-scroll"
  >
    <div class="snow"></div>
    <!-- some weird fix for mozilla firefox fouc -->
    <script>
      0;
    </script>
    <div class="flex-grow w-full max-w-3xl">
      <Navbar />
      <div class="px-4 pt-4 md:pt-8">
        <div class="min-w-full prose lg:prose-lg animate-content-fade">
          <slot />
        </div>
      </div>
    </div>
    <Footer />
    <!-- <script src='../../scripts/fouc.ts'></script> -->
    <script>
      // Helper function
      let domReady = (cb: any) => {
        document.readyState === "interactive"
          ? cb()
          : window.addEventListener("DOMContentLoaded", cb);
      };
      domReady(() => {
        // Display body when DOM is loaded
        document.body.style.visibility = "visible";
      });
    </script>
    <!-- <script src='../../scripts/snow.ts'></script> -->
    <!--<script>
      // snowflake characters
      const snow = ['0', '1', '0', '1'];
      // snowflake colors
      const colors = ['#aaa', '#bbb', '#ccc', '#ddd', '#eee'];
      // number of snowflakes
      const flakes = 16;
      // snowflake container
      const container = document.querySelector('.snow') as HTMLElement;
      // snowflake container width
      const containerWidth = container?.clientWidth;
      // snowflake array
      const snowflakes: HTMLElement[] = [];

      // create snowflakes
      for (let i = 0; i < flakes; i++) {
        // create the snowflake element
        const flake = document.createElement('div');
        // set the snowflake character
        flake.innerHTML = snow[Math.floor(Math.random() * snow.length)];
        // add the common snowflake styles
        flake.classList.add('snowflake');
        // set the unique snowflake styles
        flake.style.position = 'absolute';
        flake.style.left = `${Math.random() * containerWidth}px`;
        flake.style.fontSize = `${Math.floor(Math.random() * 30) + 10}px`;
        flake.style.color = colors[Math.floor(Math.random() * colors.length)];
        flake.style.animationDelay = `${Math.random() * 12}s`;
        container?.appendChild(flake);
        snowflakes.push(flake);
      }
    </script>-->
    <!-- Buy me a coffee -->
    <script
      data-name="BMC-Widget"
      data-cfasync="false"
      src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
      data-id="grazianocaE"
      data-description="Support me!"
      data-message="Support me!"
      data-color="#BD5FFF"
      data-position="Right"
      data-x_margin="18"
      data-y_margin="18"
    ></script>
    <script type="text/javascript">
      var _iub = _iub || [];
      _iub.csConfiguration = {
        askConsentAtCookiePolicyUpdate: true,
        countryDetection: true,
        enableLgpd: true,
        enableUspr: true,
        lgpdAppliesGlobally: false,
        perPurposeConsent: true,
        siteId: 2964385,
        whitelabel: false,
        cookiePolicyId: 95267214,
        lang: "it",
        banner: {
          acceptButtonCaptionColor: "#FFFFFF",
          acceptButtonColor: "#89230F",
          acceptButtonDisplay: true,
          backgroundColor: "#111111",
          closeButtonDisplay: false,
          customizeButtonCaptionColor: "#FFFFFF",
          customizeButtonColor: "#292929",
          customizeButtonDisplay: true,
          explicitWithdrawal: true,
          listPurposes: true,
          logo: null,
          position: "bottom",
          rejectButtonCaptionColor: "#FFFFFF",
          rejectButtonColor: "#89230F",
          rejectButtonDisplay: true,
          theme: "asphalt-dark_trend",
        },
      };
    </script>
    <script type="text/javascript">
      var _iub = _iub || [];
      _iub.csConfiguration = {
        askConsentAtCookiePolicyUpdate: true,
        countryDetection: true,
        enableLgpd: true,
        enableUspr: true,
        lgpdAppliesGlobally: false,
        perPurposeConsent: true,
        siteId: 2964385,
        whitelabel: false,
        cookiePolicyId: 95267214,
        lang: "it",
        banner: {
          acceptButtonDisplay: true,
          closeButtonDisplay: false,
          customizeButtonDisplay: true,
          explicitWithdrawal: true,
          listPurposes: true,
          logo: null,
          position: "bottom",
          rejectButtonDisplay: true,
        },
      };
    </script>
    <script type="text/javascript" src="//cdn.iubenda.com/cs/gpp/stub.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdn.iubenda.com/cs/iubenda_cs.js"
      charset="UTF-8"
      async
    ></script>
    <script id="mcjs">
      !(function (c, h, i, m, p) {
        (m = c.createElement(h)),
          (p = c.getElementsByTagName(h)[0]),
          (m.async = 1),
          (m.src = i),
          p.parentNode.insertBefore(m, p);
      })(
        document,
        "script",
        "https://chimpstatic.com/mcjs-connected/js/users/01fe76a773414ca4788728d20/1fb5cb8996704bec0d2b10aa8.js"
      );
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-REW6N54FGQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-REW6N54FGQ");
    </script>
  </body>
</html>
